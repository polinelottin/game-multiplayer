<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>a game :)</title>

        <style>
            #screen {
                border: 5px solid #CCC;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                image-rendering: -moz-crisp-edges;
                width: 400px;
                height: 400px;
            }

        </style>
    </head>
    <body>
        <canvas id="screen" height="10" width="10"></canvas>
        
        <script type="module">
            import createGame from './game.js'
            import createKeyboardListener from './keyboardListener.js'
            import renderScreen from './renderScreen.js'

            const screen = document.getElementById('screen')
            const game = createGame()
            const keyboardListener = createKeyboardListener(document)
            keyboardListener.subscribe(game.movePlayer)

            renderScreen(screen, game.state, requestAnimationFrame)

            game.addPlayer({
                playerId: 'player1', x: 5, y: 5
            })
            game.addPlayer({
                playerId: 'player1', x: 1, y: 3
            })
            game.addPlayer({
                playerId: 'player1', x: 4, y: 2
            })

            game.addFruit({
                fruitId: 'a', x: 2, y: 2
            })
            game.addFruit({
                fruitId: 'b', x: 1, y: 1
            })
            game.addFruit({
                fruitId: 'c', x: 2, y: 9
            })            
        </script>
    </body>
</html>